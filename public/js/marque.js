"use strict";var appClient=function(){var o={},t="http://localhost:9393",d=[],e=function(e){n(t+"/api/v1/marque","POST",function(e){console.log(JSON.parse(e)),a()},u())},n=function(e,t,n,a){try{var d=new XMLHttpRequest;if(d.open(t,e),d.setRequestHeader("Content-Type","application/json"),a=a?JSON.stringify(a):null,"post"===t.toLowerCase()&&!a)throw new Error("bad call");d.onload=function(e){return n(e.target.response||e.srcElement.response)},d.send(a)}catch(e){console.error(e)}},a=function(){n(t+"/api/v1/marque","GET",function(e){var t;t=JSON.parse(e),o.tab.innerHTML="",t.forEach(function(e){var t=document.createElement("input"),n=document.createElement("tr"),a=document.createElement("td");n.className="itemmarque";var d=document.createElement("i");t.type="checkbox",t.id="delete_marque_"+e.id,t.onchange=l,a.appendChild(t),n.innerHTML+="<td></td><td>"+e.id+"</td><td>"+e.nom+'</td><td><button class = "buttonModif"> Modifier </update></td>',n.appendChild(t),d.id="edit_marque_"+e.id,d.onclick=c,n.appendChild(d),o.tab.appendChild(n)})})},i=function(e,t){"create"===e?(m(),o.marqueInfo.textContent="Create new marque",o.btnNewMarque.classList.remove("is-hidden"),o.btnEditMarque.classList.add("is-hidden")):(o.marqueInfo.innerHTML='Edit marque nÂ° <span id="current_edited_id">'+t+"</span>",o.btnNewMarque.classList.add("is-hidden"),o.btnEditMarque.classList.remove("is-hidden"))},r=function(e){n("http://localhost:9393/marque/","PATCH",function(e){i("create"),a()},u())},u=function(){return{id:o.hiddenId.value,nom:o.nom.value}},c=function(e){var t=(e.srcElement||e.target).id.split("_")[2];i("update",t),n("http://localhost:9393/api/v1/marque/"+t,"GET",function(e){var t;t=JSON.parse(e),o.hiddenId.value=t.id,o.nom.value=t.nom,o.prix.value=t.prix,o.description.value=t.description})},l=function(e){var t=e.srcElement||e.target,n=Number(t.id.split("_")[2]);if(this.checked)d.push(n);else{var a=d.findIndex(function(e){return e===n});d.splice(a,1)}console.log("_(0.v.0)_ # marquesToDelete =>"),console.log(d)},m=function(){return{nom:o.nom.value="",lastnom:o.lastnom.value="",email:o.email.value="",id:o.hiddenId.value=""}};window.addEventListener("DOMContentLoaded",function(){o.tab=document.getElementById("tab_marque"),o.formMarque=document.getElementById("form_marque"),o.hiddenId=document.getElementById("marque_id"),o.nom=document.getElementById("marque_nom"),o.btnNewMarque=document.getElementById("btn_new_marque"),o.btnGetMarque=document.getElementById("btn_get_marque"),window.document.getElementById("btn_get_marque").onclick=a,window.document.getElementById("btn_new_marque").onclick=e,o.btnNewMarque.onclick=e,o.btnEditMarque.onclick=r,o.btnDeleteMarque.onclick=deleteMarque,o.formMarque.onsubmit=function(e){e.preventDefault()}})}();
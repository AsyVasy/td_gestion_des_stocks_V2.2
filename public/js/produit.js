"use strict";var appClient=function(){var o={},e="http://localhost:9393",i=[],t=function(t){n(e+"/api/v1/produit","POST",function(t){console.log(JSON.parse(t)),d()},c())},n=function(t,e,n,d){try{var i=new XMLHttpRequest;if(i.open(e,t),i.setRequestHeader("Content-Type","application/json"),d=d?JSON.stringify(d):null,"post"===e.toLowerCase()&&!d)throw new Error("bad call");i.onload=function(t){return n(t.target.response||t.srcElement.response)},i.send(d)}catch(t){console.error(t)}},d=function(){n(e+"/api/v1/produit","GET",function(t){var e;e=JSON.parse(t),o.tab.innerHTML="",e.forEach(function(t){var e=document.createElement("input"),n=document.createElement("tr"),d=document.createElement("td");n.className="itemproduit";var i=document.createElement("i");e.type="checkbox",e.id="delete_produit_"+t.id,e.onchange=l,d.appendChild(e),n.innerHTML+="<td></td><td>"+t.id+"</td><td>"+t.id_marque+"</td><td>"+t.nom+"</td><td>"+t.prix+"</td><td>"+t.description+'</td><td><button class = "buttonModif"> Modifier </update></td>',n.appendChild(e),i.id="edit_produit_"+t.id,i.onclick=a,n.appendChild(i),o.tab.appendChild(n)})})},r=function(t,e){"create"===t?(p(),o.produitInfo.textContent="Create new produit",o.btnNewProduit.classList.remove("is-hidden"),o.btnEditProduit.classList.add("is-hidden")):(o.produitInfo.innerHTML='Edit produit nÂ° <span id="current_edited_id">'+e+"</span>",o.btnNewProduit.classList.add("is-hidden"),o.btnEditProduit.classList.remove("is-hidden"))},u=function(t){n("http://localhost:9393/produit/","PATCH",function(t){r("create"),d()},c())},c=function(){return{id:o.hiddenId.value,nom:o.nom.value,description:o.description.value}},a=function(t){var e=(t.srcElement||t.target).id.split("_")[2];r("update",e),n("http://localhost:9393/api/v1/produit/"+e,"GET",function(t){var e;e=JSON.parse(t),o.hiddenId.value=e.id,o.nom.value=e.nom,o.prix.value=e.prix,o.description.value=e.description})},l=function(t){var e=t.srcElement||t.target,n=Number(e.id.split("_")[2]);if(this.checked)i.push(n);else{var d=i.findIndex(function(t){return t===n});i.splice(d,1)}console.log("_(0.v.0)_ # produitsToDelete =>"),console.log(i)},p=function(){return{name:o.name.value="",lastname:o.lastname.value="",email:o.email.value="",id:o.hiddenId.value=""}};window.addEventListener("DOMContentLoaded",function(){o.tab=document.getElementById("tab_produit"),o.formProduit=document.getElementById("form_produit"),o.hiddenId=document.getElementById("produit_id"),o.nom=document.getElementById("produit_nom"),o.prix=document.getElementById("produit_prix"),o.description=document.getElementById("produit_description"),o.btnNewProduit=document.getElementById("btn_new_produit"),o.btnGetProduit=document.getElementById("btn_get_produit"),window.document.getElementById("btn_get_produit").onclick=d,window.document.getElementById("btn_new_produit").onclick=t,o.btnNewProduit.onclick=t,o.btnEditProduit.onclick=u,o.btnDeleteProduit.onclick=deleteProduit,o.formProduit.onsubmit=function(t){t.preventDefault()}})}();